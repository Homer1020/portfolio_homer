---
import Project from "./Project.astro"
---
<div id="filter-portfolio">
  <button class="button button--sm" data-filter="*">show all</button>
  <button class="button button--sm" data-filter=".php">PHP</button>
  <button class="button button--sm" data-filter=".laravel">Laravel</button>
  <button class="button button--sm" data-filter=".javascript">JavaScript</button>
  <button class="button button--sm" data-filter=".reactjs">ReactJS</button>
  <button class="button button--sm" data-filter=".wordpress">Wordpress</button>
  <button class="button button--sm" data-filter=".nodejs">NodeJS</button>
</div>
<div class="l-portfolio" id="portfolio">
  <Project
    image='/assets/img/example_01.webp'
    title='Sistema de Parking'
    stacks={['Laravel', 'PHP']}
  />
  <Project
    image='/assets/img/example_01.webp'
    title='Sistema de censo'
    stacks={['ReactJS', 'NodeJS', 'ExpressJS']}
  />
  <Project
    image='/assets/img/example_01.webp'
    title='Gomishots landing'
    stacks={['AWS', 'CSS', 'JavaScript']}
  />
  <Project
    image='/assets/img/example_01.webp'
    title='GestiÃ³n de inventario'
    stacks={['NodeJS', 'Express', 'Bootstrap']}
  />
  <Project
    image='/assets/img/example_01.webp'
    title='Oficiales de cumplimiento'
    stacks={['ReactJS', 'PHP', 'HTML']}
  />
  <Project
    image='/assets/img/example_01.webp'
    title='Strateps web'
    stacks={['Wordpress', 'PHP']}
  />
</div>

<style>
  #filter-portfolio {
    margin-top: 2rem;
  }

  #filter-portfolio button {
    margin-right: .5rem;
    margin-bottom: 1rem;
  }
</style>

<script>
  import Isotope from 'isotope-layout'
  import imagesLoaded from 'imagesloaded'

  const $grid = document.getElementById('portfolio') as HTMLElement
  const $filterPortfolio = document.getElementById('filter-portfolio') as HTMLElement

  const grid = new Isotope($grid, {
    itemSelector: '#portfolio article',
    masonry: {
      columnWidth: '#portfolio article',
      gutter: 30
    }
  })

  $filterPortfolio.addEventListener('click', e => {
    const target = e.target as HTMLElement

    if(target.dataset.filter) {
      grid.arrange({
        filter: target.dataset.filter
      })
    }
  })
  

  imagesLoaded($grid).on('progress', function() {
    // layout Isotope after each image loads
    grid.layout();
  });

</script>